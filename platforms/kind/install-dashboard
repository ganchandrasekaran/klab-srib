#!/bin/bash
set -e

HERE=$(dirname "$(readlink --canonicalize "$BASH_SOURCE")")

# https://computingforgeeks.com/how-to-install-kubernetes-dashboard-with-nodeport/

kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml

kubectl patch service kubernetes-dashboard --patch-file "$HERE/dashboard-node-port.yaml" --namespace=kubernetes-dashboard 

kubectl apply -f "$HERE/dashboard-user.yaml"

echo "URL: https://lab1:32000/"

echo 'admin token:'

kubectl create token admin --duration=48h --namespace=kubernetes-dashboard 
